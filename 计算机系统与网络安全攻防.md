# 计算机系统与网络攻击

#### 第一节课

平时30% 期末闭卷70%

#### 杂谈

- 出席很重要，但是不点名
- 早点可以带到教室吃
- 掌握三类语言
  - 面向过程	C语言
  - 面向对象	C++/Java
  - 脚本	Python

- 可以自己写操作系统的框架，锻炼

- 学会抓包、爬虫

- 纯真库 ip 物理地址映射表


##### everything

##### autoruns

process explorer

##### Wireshark

- 抓包工具

##### nslookup

- dns查询工具

##### whois 

- ip查询工具

##### google高级检索

- 查询域名下所属网站

##### Nmap



##### 防水墙

关注大量相同、近似ip归属地的同时的流量

- 如果公安机关要对访问外网进行信息收集，怎么查到信息？


## 绪论

- 物理攻击与社会工程学攻击
- 不要做重复的工作，学会自动化

## 网络嗅探与协议分析

- 爬虫和抓包是很重要的技术

### 网络嗅探(Sniff)

- 利用计算机网络接口截获流量中的数据报文

- 嗅探得到的是二进制格式报文

#### 攻击

- 内网渗透

#### 防御

- 监听流量
- 入侵检测

#### 实现机理

- 写内核驱动附在网卡驱动上，旁入每一条报文
- 常见嗅探器软件
  - Libpcap
- 抓包工具
  - Wireshark
  - 

#### 检测技术

#### 防范措施

- 安全网络拓补结构
- 

#### 网络踩点

- DNS和IP查询
- web信息搜索

#### 网络侦察

- tracert

ICMP报文

TTL加一递增，让每一个节点都回传一个过期(time excceed)的回包，从而打出节点转发路径

特殊的服务器被配置后，可以不响应tracert请求

### 主机扫描(ping 扫描)

有确认机制的协议都可以

- Nmap 	主机扫描程序

集成了多协议扫描

##### ping扫射

同时扫描大量的IP地址段，发现ip地址下主机是否活跃

##### 防范

防御：考虑ICMP通信的过滤策略

检测：入侵检测

### 端口扫描技术

- 端口负责网络应用服务

##### 目的

攻击者：找出可供攻击的网络服务

防御者：找出没有必要开放的端口

#### TCP扫描

- 三次握手
  - 调用connect() 函数进行连接
  - 无需特权即可发起
  - 日志审计会记录大量连接与错误，容易被检测
- SYN半开扫描
  - 不属于隐蔽扫描
  - 需要更用户权限定制SYN包
  - 目标主机不会记录建立连接

##### 隐蔽扫描方式

用特殊的TCP标志位躲避扫描

- FIN扫描
  - 只带FIN位
- Null扫描
  - 全为0
- XMAS扫描
  - FIN、URG、PUSH为一
- FTP扫描
  - PORT命令

#### UDP扫描

UDP只要有反馈ack就说明活跃，不可达就不活跃

#### 防范措施

- 入侵检测、系统扫描检测工具

- 防火墙定制规则
- 禁用不必要的服务

### 系统类型探查

探查活跃主机系统

- 主动探测

  - 端口扫描

    135端口可能是window

  - 应用服务旗标攫取

  - 主动协议栈指纹鉴别

​	主动发送报文，通过反馈获取信息

- 被动识别
  - 

抓包获取信息，不做出主动访问行为

- 防范
  - 没有太好的防御办法
  - 自行检查

### 网络服务类型探查

### 漏洞

- 设计缺陷
- 代码膨胀
- 软件实现缺陷

#### 漏洞扫描软件

考点

- SATAN
- ISS
- Nessus
- 

#### 防范

- 自己先扫描
- 集中更新、打补丁
- 检测漏洞扫描行为

### 网络查点

看似无害的信息被高水平攻击者利用

autoruns

- 禁止不必要的服务
- 不要暴露主机名
- 

## DoS拒绝服务攻击

Denial of service

利用**网络协议漏洞**或**其他系统以及应用软件的漏洞** **耗尽**被攻击目标**资源**，使得被攻击的计算机或网络**无法正常提供服务**，直至系统停止响应甚至崩溃的攻击方式。

### 原理

#### 资源耗尽

- 网络带宽
- 磁盘空间
- CPU和内存

#### 配置修改

修改或删除配置文件，使系统停止或效率降低

#### 系统缺陷

### 基本形式

#### 过载

#### 消息流

#### 信号接地

物理方法关闭网络

#### 粘住攻击

- TCP半连接耗尽资源

### 攻击分类

- SYN FLOOD

  - 特点

    - 使用IP欺骗技术，攻击来源无法定位

    - 在服务端无法区分TCP连接请求是否合法

    - 发动攻击时，只要很少的数据流量就可以产生显著的效果

      大量的SYN占据资源，并且占据的资源要经过重传若干次后，才释放资源

  - 防御措施

    - 

<img src="C:\Users\泰来\AppData\Roaming\Typora\typora-user-images\image-20240912094139281.png" alt="image-20240912094139281" style="zoom:33%;" />

- 死ping(ping of death)

- 泪滴(teardrop)

  - 特点

    - 信任IP碎片中的包的标题头所包含的信息来实现攻击
    - 发送重叠偏移的伪造分段

    ![image-20240912095027996](C:\Users\泰来\AppData\Roaming\Typora\typora-user-images\image-20240912095027996.png)

  - 防御

    - 服务器应用最新的服务包
    - 或者在设置防火墙时对分段进行重组，而不是转发它们

- Smurf攻击(反射攻击)
  - 特点

- Land攻击

  - 特点

    给自己发一个SYN包，源地址和目标地址都是自己。

    结果收到SYN包后，又发回ACK消息并创建一个空连接。

  - 

- 分布式拒绝服务攻击DDoS
  - 特点
    - 攻击者控制了大量的节点
    - 攻击者
      - 操纵整个攻击过程，它向主控端发送攻击命令。
      - 是攻击主控台，可以是网络上的任何一台主机
    - 主控端
      - 传递攻击命令
    - 代理端
      - 攻击的执行者
